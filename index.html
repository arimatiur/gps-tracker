<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>GPS Tracker</title>

		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
		/>
		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

		<style>
			html,
			body,
			#mapDiv {
				height: 100%;
				width: 100%;
				padding: 0;
				margin: 0;
				z-index: -999;
				position: absolute;
			}
			#trackerDiv {
				height: auto;
				width: auto;
				background-color: aqua;
				color: darkslategrey;
				padding: 5px;
				margin: 5px;
				top: 0;
				right: 0;
				z-index: 999;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id="mapDiv">
			<div id="trackerDiv"></div>
		</div>

		<script>
			var reqcount = 0;

			var map = L.map("mapDiv").setView(
				[-6.175490901979208, 106.82709320110249],
				15
			);

			var basemap = L.tileLayer(
				"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
				{
					attribution: '&copy; <a href="http://www.example.com/">Example</a>',
					maxNativeZoom: 19,
					maxZoom: 22,
				}
			).addTo(map);

			var marker = L.marker([-6.175490901979208, 106.82709320110249]).addTo(
				map
			);

			navigator.geolocation.watchPosition((position) => {
				const { accuracy, latitude, longitude, altitude, heading, speed } =
					position.coords;

				const trackerDiv = document.getElementById("trackerDiv");

				reqcount++;
				trackerDiv.innerHTML = `<span>Accuracy: ${accuracy}</span><br/>`;
				trackerDiv.innerHTML += `<span>Latitude: ${latitude}</span><br/>`;
				trackerDiv.innerHTML += `<span>Longitude: ${longitude}</span><br/>`;
				trackerDiv.innerHTML += `<span>Altitude: ${altitude}</span><br/>`;
				trackerDiv.innerHTML += `<span>Heading: ${heading}</span><br/>`;
				trackerDiv.innerHTML += `<span>Speed: ${speed}</span><br/>`;
				trackerDiv.innerHTML += `<span>Request Count: ${reqcount}</span><br/>`;

				map.setView([latitude, longitude], 15);
				marker.setLatLng([latitude, longitude])
			});
		</script>
	</body>
</html>

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>GPS Tracker</title>

		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
		/>
		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

		<style>
			html,
			body,
			#mainDiv {
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: column;
				padding: 0;
				margin: 0;
				background-color: rgb(63, 60, 60);
			}
			#mapDiv {
				height: 70%;
				width: 100%;
			}
			#controlerDiv {
				height: 8%;
				width: 100%;
				background-color: darkcyan;
				margin: 1% auto;
				display: flex;
				justify-items: center;
				align-items: center;
			}
			#trackerDiv {
				height: 20%;
				width: 100%;
				background-color: rgb(148, 232, 232);
				color: darkslategrey;
				padding-top: 5px;
			}
		</style>
	</head>
	<body>
		<div id="mainDiv">
			<div id="mapDiv"></div>
			<div id="controlerDiv">
				<input
					style="
						font-size: x-large;
						width: 50%;
						margin-left: 2%;
						margin-right: 2%;
					"
					type="text"
				/>
				<button
					style="
						border-radius: 10px;
						font-size: x-large;
						background-color: lightgreen;
						margin-left: 2%;
						margin-right: 2%;
					"
				>
					START
				</button>
				<button
					style="
						border-radius: 10px;
						font-size: x-large;
						background-color: sienna;
						margin-left: 2%;
						margin-right: 2%;
					"
				>
					STOP
				</button>
			</div>
			<div id="trackerDiv"></div>
		</div>

		<script>
			var reqcount = 0;

			var map = L.map("mapDiv").setView(
				[-6.175490901979208, 106.82709320110249],
				12
			);

			var basemap = L.tileLayer(
				"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
				{
					attribution: '&copy; <a href="http://www.example.com/">Example</a>',
					maxNativeZoom: 19,
					maxZoom: 22,
				}
			).addTo(map);

			var marker = L.marker([-6.175490901979208, 106.82709320110249]).addTo(
				map
			);

			navigator.geolocation.watchPosition((position) => {
				const { accuracy, latitude, longitude, altitude, heading, speed } =
					position.coords;

				const trackerDiv = document.getElementById("trackerDiv");

				reqcount++;
				trackerDiv.innerHTML = `<span>Accuracy: ${accuracy}</span><br/>`;
				trackerDiv.innerHTML += `<span>Latitude: ${latitude}</span><br/>`;
				trackerDiv.innerHTML += `<span>Longitude: ${longitude}</span><br/>`;
				trackerDiv.innerHTML += `<span>Altitude: ${altitude}</span><br/>`;
				trackerDiv.innerHTML += `<span>Heading: ${heading}</span><br/>`;
				trackerDiv.innerHTML += `<span>Speed: ${speed}</span><br/>`;
				trackerDiv.innerHTML += `<span>Request Count: ${reqcount}</span><br/>`;

				marker.setLatLng([latitude, longitude]);
			});
		</script>
	</body>
</html>
